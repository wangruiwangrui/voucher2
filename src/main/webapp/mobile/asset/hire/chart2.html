<!DOCTYPE html>
<html>
	<style>
		body {
			background-color: #F4F5F6;
			width: 100%;
			height: 100%;
		}
		.current {
		}
	
		.weui-flex {
			padding: 10px;
		}
		.fade-enter-active, .fade-leave-active {
		transition: opacity .5s;
		}
		.fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {
		  opacity: 0;
		}
	</style>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>房屋出租合同</title>
		<link href="https://cdn.bootcss.com/weui/2.0.1/style/weui.min.css" rel="stylesheet">
		<link href="../css/icon.css" rel="stylesheet" />
	</head>
	<body>
		<div id="app">
			<!-- <div class="weui-search-bar" id="searchBar">
				<form class="weui-search-bar__form">
					<div class="weui-search-bar__box">
						<i class="weui-icon-search"></i>
						<input type="search" class="weui-search-bar__input" id="searchInput" placeholder="搜索" required="">
						<a href="javascript:" class="weui-icon-clear" id="searchClear"></a>
					</div>
					<label class="weui-search-bar__label" id="searchText">
						<i class="weui-icon-search"></i>
						<span>搜索</span>
					</label> 
				</form>
				<a href="javascript:" class="weui-search-bar__cancel-btn" id="searchCancel">取消</a>
			</div> -->
			
			<div class="weui-cells">
	            <div class="weui-cell">
	                <div class="weui-cell__hd" style="position: relative;margin-right: 10px;">
	                    <img src="images/pic_160.png" style="width: 50px;display: block"/>
	                    <span class="weui-badge" style="position: absolute;top: -.4em;right: -.4em;">8</span>
	                </div>
	                <div class="weui-cell__bd">
	                    <p>{{item.charter}}</p>
	                    <p style="font-size: 13px;color: #888888;">摘要信息</p>
	                </div>
	            </div>
        	</div>
			
			<div class="page list js_show">
				<div v-for="(item,index) in jsondata.rows" :key="index">
					<div class="page__bd">
						<div class="weui-cells weui-cells_form menu_list">
							<div class="weui-flex current" @click="showItem(item)">
								<div class="weui-flex__item">{{item.charter}}</div>
								<i v-if="item.show" class="icon icon-74"></i>
								<i v-else class="icon icon-108"></i>
							</div>
						</div>
					</div>
					<transition name="fade">
						<div v-if="item.show" class="weui-panel">
							<div class="weui-panel__bd">
								<div class="weui-form-preview__bd">
									<div class="weui-form-preview__item">
										<label class="weui-form-preview__label">姓名</label>
										<span class="weui-form-preview__value">{{item.charter}}</span>
									</div>
									<div class="weui-form-preview__item">
										<label class="weui-form-preview__label">证件号</label>
										<span class="weui-form-preview__value">{{item.idno}}</span>
									</div>
									<div class="weui-form-preview__item">
										<label class="weui-form-preview__label">金额</label>
										<span class="weui-form-preview__value">{{item.hire}}</span>
									</div>
									<div class="weui-form-preview__item">
										<label class="weui-form-preview__label">开始日期</label>
										<span class="weui-form-preview__value">{{item.chartBeginDate|actionTime}}</span>
									</div>
									<div class="weui-form-preview__item">
										<label class="weui-form-preview__label">结束日期</label>
										<span class="weui-form-preview__value">{{item.chartEndDate|actionTime}}</span>
									</div>
									<div class="weui-form-preview__item">
										<label class="weui-form-preview__label">地址</label>
										<span class="weui-form-preview__value">{{item.roomAddress}}</span>
									</div>
									<div class="weui-form-preview__item">
										<label class="weui-form-preview__label">合同编号</label>
										<span class="weui-form-preview__value">{{item.contractNo}}</span>
									</div>
								</div>
								<ul class="weui-media-box__info">
									<li class="weui-media-box__info__meta">操作人员</li>
									<li class="weui-media-box__info__meta weui-media-box__info__meta_extra">维修时间</li>
									<li class="weui-media-box__info__meta weui-media-box__info__meta_extra">其它信息</li>
								</ul>
								<div class="weui-form-preview__ft">
									<a @click="handleDetials(item)" class="weui-form-preview__btn weui-form-preview__btn_primary">合同详情</a>
								</div>
							</div>
						</div>
					</transition>
					</div>
			<!-- 		<template>
					    <div>
					        <p class="footer-text">--{{footerText}}--</p>
					        <p class="loading" v-show="loading"></p>
					    </div>
					</template> -->
				
				<!-- <div class="weui-loadmore">
					<i class="weui-loading"></i>
					<span class="weui-loadmore__tips">正在加载</span>
				</div> -->
			</div>
			
    </div>
		</div>
		<script src="https://unpkg.com/vue"></script>
		<script src="https://res.wx.qq.com/open/libs/weuijs/1.2.1/weui.min.js"></script>
		<script src="https://cdn.bootcss.com/axios/0.19.0/axios.min.js"></script>
		<script src="../../../assets/bootstrap-table/jquery.min.js"></script>
	
		<script>
			new Vue({
						el: '#app',
						data: {
							show: false,
							jsondata: {
							}
						},
						filters:{
							actionTime(value){
						        var date = new Date(value);
						        Y = date.getFullYear() + '-';
						        M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '-';
						        D = (date.getDate()+1 < 10 ? '0'+(date.getDate()) : date.getDate()) + ' ';
						        //D = date.getDate() + ' ';
						        h = date.getHours() + ':';
						        m = date.getMinutes() + ':';
						        s = date.getSeconds();
						        return Y+M+D;
						    }
						},
						created: function() {
							this.initdata();
							this.getcookie(name);
						},
						methods: {
							initdata: function() {
								
								axios.get('/voucher/mobile/asset/getChartByGUID.do',{
									params:{
										order:"desc",limit:10,offset:0
									}
									
								  }).then(res=>{
										this.jsondata = res.data;
										console.log("res",res);
									 })
								})
								
								axios.get('/voucher/mobile/asset/getChartInfoByGUID.do',{
									params:{
										order:"desc",limit:10,offset:0
									}
									
								  }).then(res=>{
										this.jsondata = res.data;
										this.jsondata.rows = this.jsondata.rows.map(v => {
										this.$set(v, "show", false);
										return v;
									 })
								})
							},
						    getcookie (name) {
						        var arr, reg = new RegExp("(^| )" + name + "=([^;]*)(;|$)");
						        if (arr = document.cookie.match(reg))
						            return unescape(arr[2]);
						        else
						            return null;
						    }, 
							showItem: function(item) {
								item.show = !item.show;
							},
							handleDetials: function(item) {
								console.log('item', item);
								var hireGUID =encodeURI(item.hireGUID); 
								location.href = "hire.html?hireGUID="+hireGUID;
							}
						},
					})
		</script>
	</body>
</html>
